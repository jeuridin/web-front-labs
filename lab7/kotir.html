<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="../main.css">
        <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
        <link rel="icon" href="../favicon-32x32.png">
        <link rel="icon" href="../favicon.ico">
        <title>Котировки акций компании ИНТЕР РАО</title>
        <script>
            function tableComp() {
                const table = document.getElementById('lol');
                const button = document.querySelector('button');
                const detail = document.getElementById('detail');
                const date = [
                    '01.05.2025', '02.05.2025', '05.05.2025', '06.05.2025', '07.05.2025',
                    '08.05.2025', '12.05.2025', '13.05.2025', '14.05.2025', '15.05.2025'
                ];
                const price = [
                    3.50, 3.49, 3.45, 3.50, 3.56, 3.57, 3.60, 3.60, 3.52, 3.51
                ];

                table.innerHTML = '<th>Дата</th> <th>Цена, руб</th> <th>Изменение</th>'
                
                for (let i = 0; i < date.length; i++) {
                    let row = document.createElement('tr');

                    let dateCell = document.createElement('td');
                    dateCell.innerText = date[i];
                    row.appendChild(dateCell);

                    let priceCell = document.createElement('td');
                    priceCell.innerText = price[i];
                    row.appendChild(priceCell);

                    let diffCell = document.createElement('td');

                    if (i === 0) {
                        diffCell.innerText = '—';
                        diffCell.style.color = 'black';
                    } else {
                        let diff = price[i] - price[i - 1];
                        let text = diff.toFixed(2);

                        if (diff > 0) {
                            diffCell.innerText = '+' + text;
                            diffCell.style.color = 'green';
                        } else if (diff < 0) {
                            diffCell.innerText = text;
                            diffCell.style.color = 'red';
                        } else {
                            diffCell.innerText = text;
                            diffCell.style.color = 'black';
                        }
                    }

                    row.appendChild(diffCell);


                    table.appendChild(row);
                    let sum = 0;
                    for (let i = 0; i < price.length; i++) {
                        sum += price[i];
                    }
                    let avg = (sum / price.length).toFixed(2);
                    let max = Math.max(...price).toFixed(2);
                    let min = Math.min(...price).toFixed(2);

                    detail.innerHTML = `
                        Средняя цена: ${avg} руб.<br>
                        Максимальная цена: ${max} руб.<br>
                        Минимальная цена: ${min} руб.
                    `;
                }
                    
            }
        </script>
        <style>
            main {
                color: black;
            }
        </style>
    </head>
    <body>
        <header>НГТУ, ФБ, Лабораторная работа 7</header>
        <main>
            <button onclick="tableComp()">Курс акций ИНТЕР РАО</button>
            <table border="1" id="lol"></table>

            <div id="detail"></div>
        </main>
        <footer>&copy; Жанна Азарян, ФБИ-32, 2 курс, 2025</footer>
    </body>
</html>